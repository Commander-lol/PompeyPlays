<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
        <title>Pompey Plays...</title>
        <style>
            .button .box {
                fill: #c3c5c4;
                stroke: #555a5d;
            }
            .button .arrow {
                fill: #555a5d;
            }
            .button text {
                font-family: sans-serif;
                font-size: 150%;
                fill: #555a5d;
                text-anchor: middle;
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }
            .commands .button text {
                font-size: 125%;
            }
            .group {
                position: absolute;
                width: 50%;
                height: 50%;
                display: block;
                float: left;
                clear: both;
            }
            .group.letters {
                left: 50%;
                top: 15%;
            }
            .group.commands {
                left: 25%;
                top: 50%;
            }
            #a .box {
                fill: #c92313;
            }
            #b .box {
                fill: #f0ba24;
            }

            .hitbox {
                fill: black;
                opacity: 0;
                transition: opacity 0.1s linear;
            }
            .hitbox:hover {
                opacity: 0.3;
            }

            .content, html, body {
                margin: 0;
                padding: 0;
                width: 100%;
                max-width: 500px;
                height: 100%;
                max-height: 500px;
            }

        </style>
    </head>
    <body>
        <div class="content">
            <div class="group arrows">
                <!-- LEFT ARROW -->
                <div id="cont-left" style="position:absolute;left:0px;top:125px;height:200px;width:200px;">
                    <svg viewbox="0, 0, 100, 100" class="button" id="left">
                        <path class="box" d="M 50,0 L 0,50 L 50,100 L 100,50 Z" />
                        <path class="arrow" d="M 50,10 L 60,20 L 30,50 L 60,80 L 50,90 L 10,50 Z" />
                        <path class="hitbox" d="M 50,0 L 0,50 L 50,100 L 100,50 Z" />
                    </svg>
                </div>

                <!-- RIGHT ARROW -->
                <div id="cont-right" style="position:absolute;left:250px;top:125px;height:200px;width:200px;">
                    <svg viewbox="0, 0, 100, 100" class="button" id="right">
                        <path class="box" d="M 50,0 L 0,50 L 50,100 L 100,50 Z" />
                        <path class="arrow" d="M 50,10 L 40,20 L 70,50 L 40,80 L 50,90 L 90,50 Z" />
                        <path class="hitbox" d="M 50,0 L 0,50 L 50,100 L 100,50 Z" />
                    </svg>
                </div>

                <!-- UP ARROW -->
                <div id="cont-up" style="position:absolute;left:125px;top:0px;height:200px;width:200px;">
                    <svg viewbox="0, 0, 100, 100" class="button" id="up">
                        <path class="box" d="M 50,0 L 0,50 L 50,100 L 100,50 Z" />
                        <path class="arrow" d="M 10,50 L 20,60 L 50,30 L 80,60 L 90,50 L 50,10 Z" />
                        <path class="hitbox" d="M 50,0 L 0,50 L 50,100 L 100,50 Z" />
                    </svg>
                </div>

                <!-- DOWN ARROW -->
                <div id="cont-down" style="position:absolute;left:125px;top:250px;height:200px;width:200px;">
                    <svg viewbox="0, 0, 100, 100" class="button" id="down">
                        <path class="box" d="M 50,0 L 0,50 L 50,100 L 100,50 Z" />
                        <path class="arrow" d="M 10,50 L 20,40 L 50,70 L 80,40 L 90,50 L 50,90 Z" />
                        <path class="hitbox" d="M 50,0 L 0,50 L 50,100 L 100,50 Z" />
                    </svg>
                </div>
            </div>

            <div class="group letters">
                <div style="position:absolute;left:125px;top:0px;width:200px;height:200px;">
                    <svg viewbox="0, 0, 100, 100" class="button" id="a">
                        <circle class="box" r="35" cx="50" cy="50"/>
                        <text x="50" y="50" dy="7">A</text>
                        <circle class="hitbox" r="35" cx="50" cy="50"/>
                    </svg>
                </div>
                <div style="position:absolute;left:0px;top:125px;width:200px;height:200px;">
                    <svg viewbox="0, 0, 100, 100" class="button" id="b">
                        <circle class="box" r="35" cx="50" cy="50"/>
                        <text x="50" y="50" dy="7">B</text>
                        <circle class="hitbox" r="35" cx="50" cy="50"/>
                    </svg>
                </div>
            </div>

            <div class="group commands">
                <div style="position:absolute;left:0px;top:0px;width:200px;height:200px;">
                    <svg viewbox="0, 0, 100, 100" class="button" id="select">
                        <rect class="box" x="1" y="30" width="98" height="40" rx="25" ry="25"/>
                        <text x="50" y="50" dy="7">SELECT</text>
                        <rect class="hitbox" x="0" y="30" width="100" height="40" rx="25" ry="25"/>
                    </svg>
                </div>

                <div style="position:absolute;left:225px;top:0px;width:200px;height:200px;">
                    <svg viewbox="0, 0, 100, 100" class="button" id="start">
                        <rect class="box" x="1" y="30" width="98" height="40" rx="25" ry="25"/>
                        <text x="50" y="50" dy="7">START</text>
                        <rect class="hitbox" x="0" y="30" width="100" height="40" rx="25" ry="25"/>
                    </svg>
                </div>
            </div>
        </div>

        <script src="/ws.lib" type="application/javascript"></script>
        <script>
            var socket = new CombiSocket(),
                keys = [
                    "a",
                    "b",
                    "left",
                    "right",
                    "up",
                    "down",
                    "select",
                    "start"
                ],
                sendKey = function(key) {
                    socket.message("input", {key: key});
                };
            socket.on("input-response", function(data) {
                console.log(data);
            });

            keys.map(function(e) {
                document.querySelector("#" + e + " .hitbox").addEventListener("click", sendKey.bind(null, e));
            })

        </script>
    </body>
</html>
